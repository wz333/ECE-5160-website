<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Weizhe's ECE 5160 Archive</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top"><img src="assets/img/cat-svgrepo-com%20(1).svg" alt="..." /> wz333</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <li class="nav-item"><a class="nav-link" href="#services">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="#portfolio">Labs</a></li>
<!--                        <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>-->
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <div class="masthead-subheading">Weizhe's Lab Archive</div>
                <div class="masthead-heading text-uppercase">ECE 5160: Fast Robots</div>
                <p class="nav-item">This web serves to document lab projects in ECE 5160 (Spring 2023).</p>
                <a class="btn btn-primary btn-xl text-uppercase" href="#portfolio">Direct to Labs</a>
            </div>
        </header>
        <!-- Services-->
        <section class="page-section" id="services">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">About</h2>
                    <span style='font-size:25px;' >&#128062;</span>
                    <p> </p>
                    <div class="row">
                    <div class="col-lg-8 mx-auto text-center"><p class="large text-muted">Hello! This is Weizhe Zhao, a MEng student in ECE at Cornell. This website is used to document my work for the labs in ECE 5160: Fast Robots this spring.</p></div>
                </div>
                </div>
<!--                <div class="row text-center">-->
<!--                    <div class="col-md-4">-->
<!--                        <span class="fa-stack fa-4x">-->
<!--                            <i class="fas fa-circle fa-stack-2x text-primary"></i>-->
<!--                            <i class="fas fa-shopping-cart fa-stack-1x fa-inverse"></i>-->
<!--                        </span>-->
<!--                        <h4 class="my-3">E-Commerce</h4>-->
<!--                        <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima maxime quam architecto quo inventore harum ex magni, dicta impedit.</p>-->
<!--                    </div>-->
<!--                    <div class="col-md-4">-->
<!--                        <span class="fa-stack fa-4x">-->
<!--                            <i class="fas fa-circle fa-stack-2x text-primary"></i>-->
<!--                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>-->
<!--                        </span>-->
<!--                        <h4 class="my-3">Responsive Design</h4>-->
<!--                        <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima maxime quam architecto quo inventore harum ex magni, dicta impedit.</p>-->
<!--                    </div>-->
<!--                    <div class="col-md-4">-->
<!--                        <span class="fa-stack fa-4x">-->
<!--                            <i class="fas fa-circle fa-stack-2x text-primary"></i>-->
<!--                            <i class="fas fa-lock fa-stack-1x fa-inverse"></i>-->
<!--                        </span>-->
<!--                        <h4 class="my-3">Web Security</h4>-->
<!--                        <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima maxime quam architecto quo inventore harum ex magni, dicta impedit.</p>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </section>
        <!-- Portfolio Grid-->
        <section class="page-section bg-light" id="portfolio">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Lab Projects</h2>
                    <span style='font-size:25px;' >&#129302;</span>
                    <p> </p>
<!--                    <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>-->
                </div>
                <div class="row">
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 1-->
                        <div class="portfolio-item">
                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal1">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                                </div>
                                <img width="460" height="345" class="img-fluid" src="assets/img/artemis.JPG" alt="..." />
                            </a>
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lab 1</div>
                                <div class="portfolio-caption-subheading text-muted">The Artemis Board</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 2-->
                        <div class="portfolio-item">
                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal2">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                                </div>
                                <img width="460" height="345"class="img-fluid" src="assets/img/Lab/2.png" alt="..." />
                            </a>
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lab 2</div>
                                <div class="portfolio-caption-subheading text-muted">Bluetooth</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4">
                        <!-- Portfolio item 3-->
                        <div class="portfolio-item">
                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal3">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                                </div>
                                <img width="460" height="345" class="img-fluid" src="assets/img/Lab/3.png" alt="..." />
                            </a>
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lab 3</div>
                                <div class="portfolio-caption-subheading text-muted">Time of Flight Sensors</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4 mb-lg-0">
                        <!-- Portfolio item 4-->
                        <div class="portfolio-item">
                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal4">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                                </div>
                                <img class="img-fluid" src="assets/img/Lab/4.jpg" alt="..." />
                            </a>
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lab 4</div>
                                <div class="portfolio-caption-subheading text-muted">IMU</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 mb-4 mb-sm-0">
                        <!-- Portfolio item 5-->
                        <div class="portfolio-item">
                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal5">
                                <div class="portfolio-hover">
                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
                                </div>
                                <img class="img-fluid" src="assets/img//Lab/5.png" alt="..." />
                            </a>
                            <div class="portfolio-caption">
                                <div class="portfolio-caption-heading">Lab 5</div>
                                <div class="portfolio-caption-subheading text-muted">Motors and Open Loop Control</div>
                            </div>
                        </div>
                    </div>
<!--                    <div class="col-lg-4 col-sm-6">-->
<!--                        &lt;!&ndash; Portfolio item 6&ndash;&gt;-->
<!--                        <div class="portfolio-item">-->
<!--                            <a class="portfolio-link" data-bs-toggle="modal" href="#portfolioModal6">-->
<!--                                <div class="portfolio-hover">-->
<!--                                    <div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>-->
<!--                                </div>-->
<!--                                <img class="img-fluid" src="assets/img//Lab/6.png" alt="..." />-->
<!--                            </a>-->
<!--                            <div class="portfolio-caption">-->
<!--                                <div class="portfolio-caption-heading">Lab 6</div>-->
<!--                                <div class="portfolio-caption-subheading text-muted">Photography</div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                </div>
            </div>
        </section>
        <!-- About-->
<!--        <section class="page-section" id="about">-->
<!--            <div class="container">-->
<!--                <div class="text-center">-->
<!--                    <h2 class="section-heading text-uppercase">About</h2>-->
<!--                    <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>-->
<!--                </div>-->
<!--                <ul class="timeline">-->
<!--                    <li>-->
<!--                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/1.jpg" alt="..." /></div>-->
<!--                        <div class="timeline-panel">-->
<!--                            <div class="timeline-heading">-->
<!--                                <h4>2009-2011</h4>-->
<!--                                <h4 class="subheading">Our Humble Beginnings</h4>-->
<!--                            </div>-->
<!--                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li class="timeline-inverted">-->
<!--                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/2.jpg" alt="..." /></div>-->
<!--                        <div class="timeline-panel">-->
<!--                            <div class="timeline-heading">-->
<!--                                <h4>March 2011</h4>-->
<!--                                <h4 class="subheading">An Agency is Born</h4>-->
<!--                            </div>-->
<!--                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li>-->
<!--                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/3.jpg" alt="..." /></div>-->
<!--                        <div class="timeline-panel">-->
<!--                            <div class="timeline-heading">-->
<!--                                <h4>December 2015</h4>-->
<!--                                <h4 class="subheading">Transition to Full Service</h4>-->
<!--                            </div>-->
<!--                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li class="timeline-inverted">-->
<!--                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="assets/img/about/4.jpg" alt="..." /></div>-->
<!--                        <div class="timeline-panel">-->
<!--                            <div class="timeline-heading">-->
<!--                                <h4>July 2020</h4>-->
<!--                                <h4 class="subheading">Phase Two Expansion</h4>-->
<!--                            </div>-->
<!--                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                    <li class="timeline-inverted">-->
<!--                        <div class="timeline-image">-->
<!--                            <h4>-->
<!--                                Be Part-->
<!--                                <br />-->
<!--                                Of Our-->
<!--                                <br />-->
<!--                                Story!-->
<!--                            </h4>-->
<!--                        </div>-->
<!--                    </li>-->
<!--                </ul>-->
<!--            </div>-->
<!--        </section>-->
        <!-- Team-->
<!--        <section class="page-section bg-light" id="team">-->
<!--            <div class="container">-->
<!--                <div class="text-center">-->
<!--                    <h2 class="section-heading text-uppercase">Cute Cat Pics For No Reason</h2>-->
<!--                    <h3 class="section-subheading text-muted">&#128576;</h3>-->
<!--                </div>-->
<!--                <div class="row">-->
<!--                    <div class="col-lg-4">-->
<!--                        <div class="team-member">-->
<!--                            <img class="mx-auto rounded-circle" src="assets/img/cats/1.jpg" alt="..." />-->
<!--&lt;!&ndash;                            <h4>Parveen Anand</h4>&ndash;&gt;-->
<!--&lt;!&ndash;                            <p class="text-muted">Lead Designer</p>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Parveen Anand Twitter Profile"><i class="fab fa-twitter"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Parveen Anand Facebook Profile"><i class="fab fa-facebook-f"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Parveen Anand LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>&ndash;&gt;-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="col-lg-4">-->
<!--                        <div class="team-member">-->
<!--                            <img class="mx-auto rounded-circle" src="assets/img/cats/4.jpeg" alt="..." />-->
<!--&lt;!&ndash;                            <h4>Diana Petersen</h4>&ndash;&gt;-->
<!--&lt;!&ndash;                            <p class="text-muted">Lead Marketer</p>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen Twitter Profile"><i class="fab fa-twitter"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen Facebook Profile"><i class="fab fa-facebook-f"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>&ndash;&gt;-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div class="col-lg-4">-->
<!--                        <div class="team-member">-->
<!--                            <img class="mx-auto rounded-circle" src="assets/img/cats/2.jpg" alt="..." />-->
<!--&lt;!&ndash;                            <h4>Larry Parker</h4>&ndash;&gt;-->
<!--&lt;!&ndash;                            <p class="text-muted">Lead Developer</p>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker Twitter Profile"><i class="fab fa-twitter"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker Facebook Profile"><i class="fab fa-facebook-f"></i></a>&ndash;&gt;-->
<!--&lt;!&ndash;                            <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Larry Parker LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>&ndash;&gt;-->
<!--                        </div>-->
<!--                    </div>-->

<!--                </div>-->
<!--&lt;!&ndash;                <div class="row">&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="col-lg-8 mx-auto text-center"><p class="large text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut eaque, laboriosam veritatis, quos non quis ad perspiciatis, totam corporis ea, alias ut unde.</p></div>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--            </div>-->
<!--        </section>-->
        <!-- Clients-->
        <!-- Contact-->
        <!-- Footer-->
<!--        <footer class="footer py-4">-->
<!--            <div class="container">-->
<!--                <div class="row align-items-center">-->
<!--                    <div class="col-lg-4 text-lg-start">Copyright &copy; Your Website 2022</div>-->
<!--                    <div class="col-lg-4 my-3 my-lg-0">-->
<!--                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Twitter"><i class="fab fa-twitter"></i></a>-->
<!--                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>-->
<!--                        <a class="btn btn-dark btn-social mx-2" href="#!" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>-->
<!--                    </div>-->
<!--                    <div class="col-lg-4 text-lg-end">-->
<!--                        <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>-->
<!--                        <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </footer>-->
        <!-- Portfolio Modals-->
        <!-- Portfolio item 1 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <divdytrt67>
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 1</h2>
                                    <p class="item-intro text-muted">The Artemis Board</p>
                                    <h3>Introduction</h3>
                                    <p>The objective of this lab is to get familiar with Arduino development and the SparkFun RedBoard Artemis Nano board. It primarily consists of setting up the Arduino IDE on PC and testing several basic peripherals on the Artemis board: LED, serial reading and writing, onboard temperature sensor, and microphone.  </p>
                                    <h3>Setup</h3>
                                    <p>For environment setup, the Arduino IDE 2.0.3 is installed on my computer (MacOS 13.0), which is used to write and upload code to the Artemis board. After that, the SparkFun Apollo3 board package is installed in the IDE via board manager. The board is hooked up to the computer with a USB-C cable for burning and testing.</p>
                                    <h3>Experiments & Results</h3>
                                    <h4>Task 1: Blink it Up</h4>
                                    <p>The first task is to run a built-in example <em>Blink</em>, a simple program that blinks the LED of the Artemis on and off in 1 second intervals. I changed the original blinking cycle to 1 second by modifying the parameters of delay functions from 1000 ms to 500 ms. </p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/1_1.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/3v9W1BJvQKs"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 1: Blink it Up Demonstration</p>
                                    <h4>Task 2: Serial Communication</h4>
                                    <p>The second task is to run an Artemis example sketch that operates serial communication between the board and PC.</p>
                                    <p>The MCU contains two UART peripherals to perform serial communication. In this sketch, the baud rate is set to be 115200. Upon running the program, the MCU counts from 0 to 9 then enters a loop where it listens and echoes messages received. In the demo video below, I sent "test message" to the MCU, and it echoed the characters back:</p>
                                    <div class="youtube-embedded"><iframe class="youtube-embedded"  width="640" height="360" src="https://www.youtube.com/embed/jQGmTrNQVow"></iframe></div>
                                    <p class="item-intro text-muted">Task 2: Serial Communication</p>
                                    <h4>Task 3: Analog Read</h4>
                                    <p>The second task is to run another Artemis example analogRead to test the temperature sensor of the MCU.</p>
                                    <p>Upon running the example program, the MCU continuously reads data from the temperature sensor and prints the information to the serial monitor. In the demo video, I first let it read data under the room temperature, and the measure was around 33700 counts; then I put my hand on it, and the data increased to around 34200 counts. It took about 7 seconds to transfer the heat.</p>
                                    <div class="youtube-embedded"><iframe class="youtube-embedded"  width="640" height="360" src="https://www.youtube.com/embed/lj1TR-sk5hg"></iframe></div>
                                    <p class="item-intro text-muted">Task 3: Analog Read</p>
                                    <h4>Task 4: Microphone Output</h4>
                                    <p>In this task, an example sketch is run to test the onboard pulse density microphone (PDM). The one with the largest magnitude among the sensed frequencies is printed to the serial monitor. </p>
                                    <p>In the demo video below, I first played the octave C1 to B1, the printed loudest frequencies were basically in the range of from 500 to 1400. Then I played the octave C7 to B7, which has a much higher pitch. The resultant data range was 2000-4000, indicating higher frequencies.</p>
                                    <div class="youtube-embedded"><iframe class="youtube-embedded"  width="640" height="360" src="https://www.youtube.com/embed/bc0oSq40nho"></iframe></div>
                                    <p class="item-intro text-muted">Task 4: Microphone Output</p>
                                    <h4>Additional Task: "A" Note Detector</h4>
                                    <p>The additional task asks to build a music "A" note detector.</p>
                                    <p>To realize this, I made some modifications on the example sketch in the last task by adding an <em>if</em>  block to turn on the LED when the loudest frequency hits 881 (I did several tests to obtain this value of note A frequency) and setting the LED to low at the start of every loop. The delay function is used to make the result more visible. </p>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/1_2.png" alt="..."></div>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/1_3.png" alt="..."></div>
                                    <div class="youtube-embedded"><iframe class="youtube-embedded"  width="640" height="360" src="https://www.youtube.com/embed/L5aShr8N1dw"></iframe></div>
                                    <p class="item-intro text-muted">Additional Task: Note A Detector</p>

                                    <h3>Conclusion</h3>
                                    <p>This lab mainly deals with Arduino IDE setup and tests several onboard peripherals by running and modifying example sketches on the Artemis board.</p>
                                    <p></p>
                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>
                                        Close Project
                                    </button></div>
                                </divdytrt67>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio item 2 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 2</h2>
                                    <p class="item-intro text-muted">Bluetooth</p>
                                    <h3>Introduction</h3>
                                    <p>This lab aims to establish Bluetooth connection and communicate between the Artemis board and PC.</p>
                                    <h3>Prelab</h3>
<!--                                    Setup: Briefly describe the steps taken to set up your computer for Lab 2, showing any results (i.e. MAC address printing)-->
<!--                                    Codebase: Add a brief explanation of your understanding of the codebase and how Bluetooth works between your computer and the Artemis-->
                                    <h4>a. Setup</h4>
                                    <p>I already had Python 3.10, pip and venv on my PC, so all I did to get the environment ready was run the following codes in CLI and then install packages in the virtual environment.</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_1.png" alt="..."></div>
                                    <p>On the Artemis board side, I burned the sketch ble_arduino.ino provided in the codebase so that the MCU prints its MAC address via serial communication.</p>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/2_2.png" alt="..."></div>
                                    <h4>b. Codebase</h4>
                                    <p>The codebase used in this lab to establish the BLE channel consists of two parts: Python codes that runs on PC and Arduino codes that process commands on MCU. It is structured as follows:</p>
                                    <script src="https://gist.github.com/wz333/3d133cd6d736ddfe17799d35179d0989.js"></script>
                                    <p></p>
                                    <p>On PC end, the configuration file <em>connection.yaml</em> sets the MAC address on the other side and Universally Unique Identifiers (UUID) used in communication. The <em>cmd_type.py</em> file uses an enumeration class to record the map of command types and their associated values. <em>ble.py</em> and <em>base_ble.py</em> define fundamental functions to support BLE. The Jupyter notebook file <em>demo.ipynb</em> runs key commands.</p>
                                    <p>For MCU, besides the file <em>ble_arduino.ino</em> which is run on the board, there are three header files that define BLE characteristics, Extended String and functions related to robot command strings. </p>
                                    <p>The BLE connection between PC and MCU works in a pattern like a community bulletin board, where the peripheral device posts data for all radios in the community to read and the central device acts like a reader to view the information on the bulletin board and get the data it needs. </p>
                                    <h3>Lab Tasks & Results</h3>
                                    <h4>Configurations</h4>
                                    I generated a new UUID <em>4921f511-ca96-4e6d-b6de-b8b6971e9d01</em>, and changed the <em>BLE_UUID_TEST_SERVICE</em> in ble_arduino.ino and <em>ble_service</em> in connection.yaml accordingly. I also replaced the Artemis address with the one printed by the MCU (c0:83:0d:6a:12:3c):
                                    <div class="labim" ><img width="360" src="assets/img/Lab/2_3.png" alt="..."></div>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/2_4.png" alt="..."></div>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/2_5.png" alt="..."></div>
                                    <h4>Run demo.ipynb</h4>
                                    <p>Before kicking off lab tasks, I first ran the demo codes and obtained the following outputs:</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_6.png" alt="..."></div>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_7.png" alt="..."></div>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_8.png" alt="..."></div>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_9.png" alt="..."></div>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_10.png" alt="..."></div>
                                    <p>The corresponding output from the MCU:</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_11.png" alt="..."></div>
                                    <h4>Task 1: Send Echo Command</h4>
                                    <p>The first task is to complete the <em>ECHO</em> case operations on the MCU side, which enables it to reply the PC with an augmented message. I programmed the MCU to repeat the received message three times and append a smiley face:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/2_12.png" alt="..."></div>

                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/VlH2s0KiM3g"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 1: Send Echo Command<</p>
                                    <h4>Task 2: Get Time Command</h4>
                                    <p>The second task is to complete a command <em>GET_TIME_MILLIS</em> where the MCU sends the time in the format of "T:123456".</p>
                                    <p>I added GET_TIME_MILLIS to the enumeration of both PC and Artemis program. I completed the command as:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/2_13.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/5vjS1YtZ08E"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 2: Get Time Command</p>
                                    <h4>Task 3: Notification Handler</h4>
                                    <p>This task is to set up a notification handler at the PC to extract time from the string sent by Artemis.</p>
                                    <p>In the handler, the received byte array is first decoded to string then sliced, so only the time value is printed:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/2_14.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/7cwEbAJiXJc"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 3: Notification Handler</p>
                                    <h4>Task 4: Get Temperature Command</h4>
                                    <p>In this task, another command <em>GET_TEMP_5s</em> is added which sampled temperature in an interval of 1 second for five times and sends the obtained values all at once:</p>
                                    <div class="labim" ><img width="540" src="assets/img/Lab/2_15.png" alt="..."></div>
                                    <p>A new notification handler <em>print_recv</em> is setup for this task to demonstrate the results on PC:</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/4_Pm2u5W3sI"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 4: Get Temperature Command</p>

                                    <p>To sample temperature more rapidly, I use another command <em>GET_TEMP_5s_RAPID</em> in which I set an interval of 100ms, thus 5 * 1000 / 100 = 50 samples were obtained in 5 seconds, stored in two arrays, then sent one at a time to PC:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/2_16.png" alt="..."></div>

                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/Gssiif0stbA"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Task 4: Get Temperature Rapidly</p>
                                    <h4>Task 5: Limitations</h4>
                                    <p>The Artemis board has 384 kB of RAM, assuming that all of it can be used for the sampled data, thus <code>384*1000*8/16 = 192,000</code> 16-bit data can be stored. If the data is sampled at 150 Hz, only <code>192,000/150 = 1280</code> seconds of data can be recorded. In other words, only <code>1280/5 = 256</code> flows of "5 seconds of 16-bit values taken at 150 Hz" can be afforded. </p>
                                    <h4>Task 6: (5160) Effective Data Rate and Overhead</h4>
                                    <p>To create messages with loads of different sizes, I add a command <em>DATARATE</em> that makes the MCU to send a string of the length specified by PC. For example, if PC runs <code>ble.send_command(CMD.DATARATE,20)</code>, the MCU will reply with a string of 20 '.'s, which takes 20 bytes.</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/2_18.png" alt="..."></div>
                                    <p>To measure data rate continuously, I set a notification handler for PC which records time upon receiving a message <code>recv_time</code>, command Artemis to send a reply with one more byte, record the sending time <code>send_time</code>, and calculate the data rate by <code>length of message /(recv_time-send_time)</code> in every round.</p>
                                    <div class="labim" ><img width="460" src="assets/img/Lab/2_17.png" alt="..."></div>
                                    <p>By running the command, I obtained the data rate for message with 5 and 120 bytes, and also a plot for data rate in terms of message length from 0 to 150 bytes:</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/2_19.png" alt="..."></div>
                                    <p>The plot implies that in general data rate increases as the size of message load goes up. Therefore, it is safe to conclude that larger replies help to reduce the portion of overhead and increase effective data rate, and sending messages in many short packets introduces greater overhead. </p>
                                    <h4>Task 7: (5160) Reliability</h4>
                                    <p>To count number of messages sent/received on both sides, I ran a command on Artemis that continuously send messages which carries the information of its index, and counts messages received by PC in a handler: </p>
                                    <div class="labim" ><img width="460" src="assets/img/Lab/2_20.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/wk08yGXCTV8"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">Additional Task: Reliability</p>
                                    <p>As the MCU sends data continuously, the data rate is as high as possible. In the test, the computer catched all the messages sent from Artemis without missing any data, so it can be concluded that transmission is reliable.</p>
                                    <h3>Conclusion</h3>
                                    <p>This project performs communication between PC and the Artemis board through Bluetooth. Limitations, effective data rate, and reliability concerning such transimission are also discussed. </p>
                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>
                                        Close Project
                                    </button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio item 3 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 3</h2>
                                    <p class="item-intro text-muted">Time of Flight Sensors</p>
                                    <h3>Introduction</h3>
                                    <p>This lab aims to arm the Artemis board with two time-of-flight distance sensors. The range, accuracy, repeatability, and reading time of the sensors are examined. </p>
                                    <h3>Prelab</h3>
                                    <h4>(a) I2C</h4>
                                    <p>The sensors use I2C to communicate with the Artemis board. As is specified on VL53L1X's datasheet, the default I2C address is <code>0x52</code>.</p>
                                    <h4>(b) 2 Sensors</h4>
                                    <p>Two ToF sensors shall be employed on the robot. As these two share the same default I2C address, one of them is supposed to be changed manually. I implemented this by connecting the XSHUT pin of one of the sensors to a GPIO pin on Artemis. In the setup process, after starting both sensors, the pin outputs low to temporarily shut down the corresponding sensor. A new I2C address is assigned to the other sensor programmatically, then the shut down one can be enabled again with its default address. </p>
                                    <h4>(c) Placement on Robot</h4>
                                    <p>I plan to place thw two sensors at the front corners on the robot car, as is shown in the picture:</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/3_0.png" alt="..."></div>
                                    <p>Each sensor is able to detect obstacles on its corresponding side. If they detect an obstacle of the same distance simultaneously, it is probable that there is an obstacle in the front. However, this requires both of the sensors function correctly with high precision. Also, small obstacles in the front could be missed if it is closer to one sensor. More accurate measurement could be achieved by adding more sensors.</p>
                                    <h4>(d) Wiring</h4>
                                    <div class="labim" ><img width="600" src="assets/img/Lab/3_1.png" alt="..."></div>
                                    <p class="item-intro text-muted">Wiring Diagram</p>
                                    <p>Qwiic cables are arranged in colors: black for GND, red for 3.3V, blue for SDA and yellow for SCL.</p>
                                    <h3>Lab Tasks & Results</h3>
                                    <h4>Task 1: Connection</h4>
                                    <p>The two ToF sensors are connected to a QWIIC break-out board then to the Artemis board.</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/3_2.png" alt="..."></div>
                                    <p class="item-intro text-muted">Picture of ToF sensors connected to QWIIC</p>
                                    <div class="labim" ><img width="640" src="assets/img/Lab/3_3.png" alt="..."></div>
                                    <p class="item-intro text-muted">Screenshot of Artemis Scanning for I2C Device</p>
                                    <p>After being physically connected, the Artemis scanned the I2C channel and found a device with an address of <code>0x29</code>, which is different from the value <code>0x52</code> claimed in VL53L1X's datasheet. The reason behind this is that I2C transmits MSB first. <code>0x29</code> is 101001 in binary and <code>0x52</code> is 1010010, the first 7 bits of which are the same. After sending the first 7 digits, a zero is padded at the end to fill 8 bits, making <code>0x29</code> turns into <code>0x52</code>.</p>
                                    <h4>Task 2: Sensor Data of Chosen Mode</h4>
                                    <p>The ToF sensor has three modes. The default Long mode can measure data up to 4 m away, achieving the maximum ranging distance, but is relatively sensitive to ambient light conditions. The Short mode only has a ranging distance of up to 1.3 m, but it also has the best immunity against ambient changes. The Medium mode is in the middle of the other two, with the ability to detect obstacles up to 3 m away and not too sensitive of ambient lights.</p>
                                    <p>The final robot is expected to cope with different surroundings, so good ambient immunity is required. Also, a range of 1.3 meters is large enough for a small car. Thus, I think the Short mode should work well on it.</p>
                                    <div class="labim" ><img width="350" src="assets/img/Lab/3_4.png" alt="..."></div>
                                    <p class="item-intro text-muted">Experiment Setting</p>
                                    <p>I checked the range, accuracy, repeatability, and ranging time of the ToF sensor. The samples were taken at an interval of 50 mm from 50 mm to 900 mm. By adding some codes to the ReadDistance example sketch, the MCU sent the ranging time for every measure to PC.</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_5.png" alt="..."></div>
                                    <div class="labim" ><img width="250" src="assets/img/Lab/3_8.png" alt="..."></div>
                                    <p class="item-intro text-muted">Sample Result</p>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/3_6.png" alt="..."></div>
                                     <p class="item-intro text-muted">Measured Distance VS Truth</p>

                                    <div class="labim" ><img width="400" src="assets/img/Lab/3_7.png" alt="..."></div>
                                    <p class="item-intro text-muted">Ranging Time VS Distance</p>
                                    <p>It can be seen from the results that for Short mode, distance within the 1.3m range can be measured with a maximum error of about &#177; 8mm. Measurement beyond the range returns a zero value. The measurement has good repeatability. Ranging time has little to do with the measuring range, and is approximately 50.0 ms. </p>
                                    <h4>Task 3: 2 ToF Sensors</h4>
                                    <p>To use 2 ToF sensors simultaneously, one of them needs to be assigned a new I2C address programmatically while the other one is restarted via the XSHUT pin to maintain the default address:</p>
                                    <div class="labim" ><img width="360" src="assets/img/Lab/3_9.png" alt="..."></div>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_10.png" alt="..."></div>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_11.png" alt="..."></div>
                                    <p>In the demonstration video, the two sensors work in parallel and generate results separately:</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/u5838E9BPNU"></iframe>
                                    </div>
                                    <h4>Task 4: ToF Sensor Speed</h4>
                                    <p>To maximize reading speed, I removed the<code>stopRanging()</code> and <code>clearInterrupt()</code> commands and moved the <code>startRanging()</code> process to setup codes. Sensor data are only printed when new reading is ready, i.e., <code>.checkForDataReady()</code> returns True.</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_12.png" alt="..."></div>
                                    <div class="labim" ><img width="350" src="assets/img/Lab/3_13.png" alt="..."></div>
                                    <p class="item-intro text-muted">Sample Result</p>
                                    <p>Although there are several redundant codes (getting time and serial printing), the loop consistently takes 10 to 11 ms, which is significantly reduced from the ranging time of 50 ms.</p>
                                    <p>Within the 10-11 ms, the biggest share of time is still taken by ToF reading operations (~8 ms). Therefore, I suppose the limiting factor to lowering time is I2C communication performed between sensors and Artemis.</p>
                                    <h4>Task 5: Time v Distance</h4>
                                    <p>A <code>GET_ToF_5s</code> command is written to send ToF data sampled in 5 s to PC through BLE:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_14.png" alt="..."></div>
                                    <p>PC uses a notification handler to parse the received message. Then the samples from two sensors are plotted against time stamps:</p>
                                    <div class="labim" ><img width="450" src="assets/img/Lab/3_15.png" alt="..."></div>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_16.png" alt="..."></div>
                                    <h4>Task 6: (5160) Discussion on infrared transmission based sensors</h4>
                                    <p>The sensor used in this lab is based on time-of-flight infrared transmission. Such sensors work by emitting a pulse modulated signal, taking a travel time t until return, and getting the distance d from <code>d = t*c/2</code>, where c is the speed of time. Pros of ToF IR sensors are high sample rate, small form factor and immunity to changes in colors, textures and ambient lights. But they also have shortcomings as high cost and complicated processing.</p>
                                    <p>Some infrared distance senosrs base on amplitude, comparing the amplitude of the reflected wave to the one of the original emitted wave and calculate distance accordingly. Their pros include low cost and simple circuitry, and they work reasonably well under many circumstances. However, such sensors are extremely sensitive to target reflectivity and perform poorly in high ambient light.</p>
                                    <p>Another type is triangulation–based sensors. To obtain the distance to target, they emit a wave at an angle and measure the reflected wave with an array of diodes, then calculate results with the angle and the distance between the highest-magnitude diode. Their pros are simple circuitry and less  sensitivity to color, texture, ambient light. On the other side, they are expensive and bulky, and also do not work in high ambient light and has the problem of low sample rate.</p>
                                    <h4>Task 7: (5160) Sensitivity of sensors to colors and textures</h4>
                                    <p>I tested the ToF sensor against a coarse white wall, white paper, yellow book cover, and a piece of black leather. It turned out that there was no notable difference among these materials in terms of reading accuracy and speed. Therefore, the conclusion that the ToF IR sensor is not sensitive to colors and textures is implied.</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/3_18.png" alt="..."></div>
                                    <p class="item-intro text-muted">Experiment Setting</p>
                                    <h3>Conclusion</h3>
                                    <p>Two ToF sensors are connected to the Artemis board. The performance of the two sensors are discussed under different circumstances. Sensor data are sent to PC via BLE and parsed for future use.</p>
                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>
                                        Close Project
                                    </button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio item 4 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 4</h2>
                                    <p class="item-intro text-muted">IMU</p>
                                    <h3>Introduction</h3>
                                    <p>This lab adds an IMU board to Artemis and tests the motion of robot car.</p>
                                    <h3>Task 1: IMU Setup</h3>
                                    <h4>(a) Connection & Example Code</h4>
                                    <p>IMU is connected to Artemis through the QWIIC breakout board:</p>
                                    <div class="labim" ><img width="340" src="assets/img/Lab/4_1.png" alt="..."></div>
                                    <p class="item-intro text-muted">Artemis IMU Connection</p>
                                    <p>After uploading the IMU example code to Artemis, the readings from the accelerometer, gyroscope and magnetometer on IMU are printed:</p>
                                    <div class="labim" ><img width="500" src="assets/img/Lab/4_2.png" alt="..."></div>
                                    <p>In the example code, a constant <code>AD0_VAL</code> is defined for <code>.begin(WIRE_PORT, AD0_VAL);</code>. It should be set to 1, which is the default value for the SparkFun 9DoF IMU breakout, but should be 0 if the ADR jumper is closed.</p>
                                    <h4>(b) Data Discussion</h4>
                                    <p>Accelerometers measure acceleration, which can be used to gauge orientation when stationary by the component of gravity pull on x, y and z axes. Gyroscopes measure the angular velocity around the three axes, which can also be used to obtain orientation.</p>
                                    <div class="labim" ><img width="480" src="assets/img/Lab/4_3.png" alt="..."></div>
                                    <p>When the IMU is laid flat on the table, the z axis acceleration is around 1000 mg. All other readings from the accelerometer and the gyroscope are approximately zero, for there is no acceleration or movement except for gravity pull.</p>
                                    <div class="labim" ><img width="480" src="assets/img/Lab/4_4.png" alt="..."></div>
                                    <p>When I rotated the IMU to a 90-degree tilt, the 1000 mg transferred to y-axis. Gyroscope reading on y-axis arose then returned to zero when the rotation finished.</p>
                                    <h4>(c) Visual Indication</h4>
                                    <p>I added codes to blink the LED on Artemis when IMU is connected and started as a visual indication:</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_6.png" alt="..."></div>
                                    <div class="labim" ><img width="350" src="assets/img/Lab/4_7.png" alt="..."></div>
                                    <h3>Task 2: Accelerometer</h3>
                                    <h4>(a) Pitch and Roll</h4>
                                    <p>Accelerometer readings can be turned into pitch and roll through mathematical calculations. Pitch is given by <code>pitch_a = atan2(myICM.accX(),myICM.accZ())*180/M_PI</code>, and roll is given by <code>roll_a  = atan2(myICM.accY(),myICM.accZ())*180/M_PI</code>.</p>
                                    <p>Example outputs for {-90, 0, 90} degrees pitch and roll are:</p>
                                    <div class="labim" ><img height="120" src="assets/img/Lab/4_8.png" alt="...">

                                    <img height="120" src="assets/img/Lab/4_9.png" alt="...">

                                    <img height="120" src="assets/img/Lab/4_10.png" alt="..."></div>
                                    <p class="item-intro text-muted">{-90, 0, 90} Degrees Pitch</p>
                                    <div class="labim" ><img height="120" src="assets/img/Lab/4_11.png" alt="...">
                                        <img height="120" src="assets/img/Lab/4_12.png" alt="...">
                                        <img height="120" src="assets/img/Lab/4_13.png" alt="..."></div>
                                    <p class="item-intro text-muted">{-90, 0, 90} Degrees Roll</p>

                                    <h4>(b) Accuracy Discussion</h4>
                                    <p>Although noise affects the precision of accelerometer results a lot, causing an error of approximately &#177; 2 degrees, the accuracy is pretty good (readings are basically centered at each true value). Thus, I don't think a two-point calibration is needed in this case.</p>
                                    <h4>(c) Frequency Spectrum Analysis</h4>
                                    <p>FFT is used to analyze noise in accelerometer readings. I sampled roll data with a sample rate of 64 for 5 seconds and got 320 points to perform FFT. During the sampling period, I slowly turned IMU around its x-axis.</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_14.png" alt="..."></div>
                                    <p>With the sampled data from Artemis, a python script was run to generate FFT result:</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_15.png" alt="..."></div>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_16.png" alt="..."></div>

                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_17.png" alt="..."></div>

                                    <p>From the frequency domain plot, it can be seen that the major component, which stands for the useful data part, lies in the low frequency area near 0 Hz. There is not any notable spike in the frequency domain plot, probably because there is already a low pass filter selected by default for accelerometer in the IMU chip. However, if I have to take another cut-off frequency to eliminate remaining noise, I will choose 5 Hz, which would preserve useful low-frequency data and filter out most of the noise.</p>
                                    <h3>Task 3: Gyroscope</h3>
                                    <h4>(a) Pitch, Roll, and Yaw</h4>
                                    <p>Gyroscope data are collected to calculate pitch, roll and yaw:</p>
                                    <div class="labim" ><img width="360" src="assets/img/Lab/4_18.png" alt="..."></div>
                                    <p>Below are some example outputs at different gestures:</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_19.png" alt="..."></div>
                                    <p>Initially, the IMU board is set to be zero in all three orientations. The returned results from gyroscope and accelerometer are both accurate.</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_20.png" alt="..."></div>
                                    <p>After a while, I only changed the yaw to 90 degrees with the board still laid flat on table. The yaw result was accurate, but the pitch and roll result from gyroscope were far from true value.</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_21.png" alt="..."></div>
                                    <p>Then I turned the yaw to -90 degrees. Still, yaw was measured accurately, but  pitch and roll given by gyroscope became more far away from the truth.</p>
                                    <p>To conclude, the gyroscope gives accurate yaw data, but has severe drifting issue in terms of pitch and roll.</p>
                                    <h4>(b) Complementary Filter</h4>
                                    <p>As accelerometer is susceptible to noise but not drifting, while gyroscope generates smooth drifting results, the two can be combined to cancel each other's drawback with a complementary filter. The filter is given by the formula <code>theta = (theta + gyr_data * dt)*(1 - alpha) + acc_data * alpha</code>: </p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_22.png" alt="..."></div>
                                    <p>After several tests, I chose alpha to be 0.3 to maximize performance. Here's the video demonstrating results from accelerometer only, gyroscope only, and combined, which is close to the accurate accelerometer result but without noise:</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/8jJfevYjoTc"></iframe>
                                    </div>
                                    <h3>Task 4: Sample Data</h3>
                                    <p>After commenting out unnecessary delays and <code>Serial.print</code> statements with only the one printing calculated loop time, the maximum speed to sample data is 1-2 ms:</p>
                                    <div class="labim" ><img width="420" src="assets/img/Lab/4_23.png" alt="..."></div>
                                    <p class="item-intro text-muted">Loop Time in ms</p>
                                    <p>To send IMU and ToF data to PC, I added a new command <code>GET_ToF_IMU_5s</code> which collects IMU and ToF data in arrays for 5s and then sent to PC via bluetooth in the format of time|tof1,tof2|accx,accy,accz|gyrx,gyry,gyrz:</p>
                                    <script src="https://gist.github.com/wz333/a96a787c604a844b8232d223f0fa20fb.js"></script>
                                    <p>Received data are processed by a notification handler in Python and then plotted: </p>
                                    <div class="labim" ><img width="360" src="assets/img/Lab/4_24.png" alt="..."></div>
                                    <div class="labim" ><img height="240" src="assets/img/Lab/4_25.png" alt="..."><img height="240" src="assets/img/Lab/4_26.png" alt="..."></div>
                                    <p>As an int takes 2 bytes, and a float takes 4 bytes, each such sample will generate 3*2+6*4=30 bytes. One second takes 10 samples, resulting in 300 bytes. With 384 kB of RAM, the Artemis can support 384*1024/300=1310s of such sampling with full memory allocated to the arrays.</p>
                                    <h3>Task 5: Cut the Coord</h3>
                                    <p>The 3.7V 850mAh battery is used to support the motor,as it consumes most of the electricity to drive the car, and Artemis board with peripheral sensors use the 3.7V 650mAh one.</p>
                                    <div class="labim" ><img width="360" src="assets/img/Lab/4_29.png" alt="..."></div>
                                    <h3>Task 6: Record a Stunt</h3>
                                    <p>With the remote control, I managed to make the RC car perform stunts like flipping and spinning in place. To do a flip, the motors should first dash in one direction then motors abruptly inverse direction.</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/QimdDP-7Cis"></iframe>
                                    </div>
                                     <p class="item-intro text-muted">Without Artemis</p>
                                    <div class="youtube-embedded">
                                        <p>Then I attached Artemis to the car and let it did a spin. Motion data for 5 seconds were recorded and sent to PC.</p>
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/jmDqycNuwNM"></iframe>
                                    </div>
                                    <p class="item-intro text-muted">With Artemis</p>
                                    <p>Corresponding collected data plots:</p>
                                    <div class="labim" ><img height="280" src="assets/img/Lab/4_30.png" alt="..."><img height="280" src="assets/img/Lab/4_27.png" alt="..."><img height="280" src="assets/img/Lab/4_28.png" alt="..."></div>
                                    <p>The ToF data are meaningless as the ToF sensors are not fixed to face proper direction. The abrupt change of GyrZ at 3.5 s indicates the car started to spin. Acceleration oscillations in Y and Z correspond to the bumps while spinning. </p>

                                    <h3>Conclusion</h3>
                                    <p>In this lab, an IMU is attached to Artemis, the accelerometer and gyroscope readings of which are used to calculate orientation of the robot. Also, battery supported Artemis and robot car are tested.</p>
                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>
                                        Close Project
                                    </button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio item 5 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 5</h2>
                                    <p class="item-intro text-muted">Motors and Open Loop Control</p>
                                    <h3>Introduction</h3>
                                    <p>In this lab, two motor drivers are tested and then used to drive motors of the car. Other components as sensors and batteries are also secured. An untethered open loop control is performed in the end.</p>
                                    <h3>Prelab</h3>
                                    <p>The intended connections between the motor drivers, Artemis, and battery are shown as:</p>
                                     <div class="labim" ><img width="450" src="assets/img/Lab/5_1.png" alt="..."></div>
                                    <p>I chose 13, A14, A15 and A16 on Artemis as the motor drivers' input because these pins support PWM, which are implied in the schematic plot by a ~ sign.</p>
                                    <div class="labim" ><img width="350" src="assets/img/Lab/5_2.png" alt="..."></div>
                                    <p>The Artemis and the motor drivers are powered by different batteries so that they can be debugged separately and isolate the noise generated by the motor end from Artemis. Also, the motors deplete power much faster than the Artemis, thus they need to be power separately from the MCU.</p>
                                    <h3>Lab Tasks</h3>

                                    <h4>Task 1: PWM Signals Generation</h4>
                                    <p>To display the PWM signal, the oscilloscope's probe tip is connected to one of a motor driver's output and the ground clip is attached to the driver's GND:</p>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/5_5.png" alt="..."></div>
                                    <p class="item-intro text-muted">Oscilloscope Hookup</p>
                                    <p>As for power supply of the driver, I simply attach the 3.7 V 850 mAh battery to it, which is within the operating voltage range of 2.7 V to 10.8 V stated in the motor driver's datasheet.</p>
                                    <p>I first tested the driver with <code>analogWrite(13,63); analogWrite(A14,0);</code>, which generates a 25% duty cycle PWM signal as 63 is approximately 25% of 255. The corresponding oscilloscope display is:</p>
                                    <div class="labim" ><img width="300" src="assets/img/Lab/5_3.png" alt="..."></div>
                                    <p>Then I tested on <code>analogWrite(13,127); analogWrite(A14,0);</code>, which generates a 50% duty cycle PWM signal as 127 is approximately half of 255. The corresponding oscilloscope display is:</p>
                                    <div class="labim" ><img width="300" src="assets/img/Lab/5_4.png" alt="..."></div>
<!--                                    <hr>-->

<!--                                    <p>I fried one of my motor driver chips, thus I am still working on the rest of the lab &#128553;</p>-->

                                    <h4>Task 2: Wheels Spinning</h4>
                                    <p>By running the following two codes respectively, I managed to spin the right-side wheels forward and backward.</p>
                                    <div class="labim" ><img width="180" src="assets/img/Lab/5_21.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/S-AzaEoELgU"></iframe>
                                    </div>
                                    <div class="labim" ><img width="170" src="assets/img/Lab/5_20.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/78k4J6o1r8s"></iframe>
                                    </div>
                                    <p>With battery attached to the motor drivers, I put the car on the floor and let wheels on both sides spin so that the car can move forward:</p>
                                    <div class="labim" ><img width="200" src="assets/img/Lab/5_23.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/_6IOVH5paoI"></iframe>
                                    </div>
                                    <h4>Task 3: Secure Components</h4>
                                    <p>All the components are secured (shout out to my lab partner Boxin in this task!!):</p>
                                    <div class="labim" ><img width="400" src="assets/img/Lab/5_30.png" alt="..."></div>
                                    <h4>Task 4: Lower Limit PWM Value</h4>
                                    <p>The lowest PWM values to drive the car to move on the lab's floor and make turns are examined by burning different speed values into Artemis and see if the value works. </p>
                                    <p>To make the car run, the lower limit PWM value I obtained is 25, corresponding to 9.80% duty cycle:</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/j4793SryDaA"></iframe>
                                    </div>
                                    <p>The lower limit to do in-place turns I obtained is 80, corresponding to 31.37% duty cycle:</p>
                                    <div class="labim" ><img width="240" src="assets/img/Lab/5_40.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/KKM-Wnd0g4k"></iframe>
                                    </div>
                                    <p>But these results are susceptible to change in lab settings, e.g. different textures of the floor and smoothness of the tires, etc.. </p>
                                    <h4>Task 5: Go a Straight Line</h4>
                                    <p>Initially, the car tended to drift towards its left side, so I added a calibration factor 1.25 which gave the left wheels more power so that the car can follow a fairly straight line. However, such static calibration method is susceptible to environment changes, so it is necessary to use PID control in future labs.</p>
                                    <div class="labim" ><img width="300" src="assets/img/Lab/5_50.png" alt="..."></div>
                                    <p>By applying the calibration stated above, the car can go a fairly straight line for over 6 feet in the video (each vinyl tile is 1 feet in length):</p>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/MT-v3kbassg"></iframe>
                                    </div>
                                    <h4>Task 6: Open Loop Control</h4>
                                    <p>I wrap up the basic movements into functions to To minimize repeat in the program:</p>
                                    <script src="https://gist.github.com/wz333/b30bb7f9819df44df9569f68d55fc8d8.js"></script>
                                    <p>For the untethered open loop control, the car is programmed to move forth and back and make turns in both directions with the following codes:</p>
                                    <div class="labim" ><img width="120" src="assets/img/Lab/5_60.png" alt="..."></div>
                                    <h4>Additional Task: analogWrite Frequency Discussion</h4>
                                    <p>As measured in previous labs, the ToF sensor reading takes ~8 ms, corresponding to <code>125 Hz</code>, and IMU reading takes ~2, corresponding to <code>500 Hz</code>.</p>
                                    <div class="labim" ><img width="350" src="assets/img/Lab/5_02.png" alt="..."></div>
                                    <p>Using the codes above, I found that the analogWrite can be performed within 1.5 ms, thus won't be a bottleneck to increase speed. With loads on, I tested the PWM signal in 50% duty cycle and got a frequency of <code>~180 Hz</code>. This frequency is fast enough to drive a inertial device like the motors. It is also adequate to satisfy the fastest ToF based control, but is lower than the maximum frequency of IMU reading. Therefore, generating a faster PWM signal by manually configuring timers can help to follow the faster IMU data based control. But there's no free lunch: at higher PWM frequencies, the motor's coils can't extract as much as energy from the pulses thus require higher voltage to spin. </p>
                                    <h4>Additional Task: Lower Limit PWM Value in Motion</h4>
                                    <p>As static friction is greater than kinetic friction, it takes higher voltage to start the car from still than to keep it moving while in motion. To explore the lower limit PWM value in motion, I set the initial speed as 26 to start the car, then deduct 1 from the value every 3 seconds to see which value stops the car.</p>
                                    <div class="labim" ><img width="300" src="assets/img/Lab/5_90.png" alt="..."></div>
                                    <div class="youtube-embedded">
                                    <iframe  width="640" height="360" src="https://www.youtube.com/embed/NW9rHXVg8jk"></iframe>
                                    </div>
                                    <p>As demonstrated in the video, the car stopped after 6 seconds from the time it started to move, which corresponded to PWM value of 24. So the lowest limit is 24 (9.4% duty cycle) to keep the car running in motion, which is lower than the limit to start (25).</p>

                                    <h3>Conclusion</h3>
                                    <p>This lab discusses PWM signals and explores the lower bound to drive the car to start, turn and keep moving in motion. All the components to employ are assembled and secured in the car. A simple open loop control is also performed.</p>
                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>

                                        Close Project
                                    </button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio item 6 modal popup-->
        <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-bs-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project details-->
                                    <h2 class="text-uppercase">Lab 6</h2>
                                    <p class="item-intro text-muted">Closed-loop control (PID)</p>
                                    <h3>Introduction</h3>
                                    <p>This lab is about PID control. I chose to perform PID on position control by </p>
                                    <h3>Prelab</h3>
                                    <h3>Lab Tasks</h3>


                                    <h3>Conclusion</h3>

                                    <div class="labbtn" >
                                    <button class="btn btn-primary btn-xl text-uppercase" data-bs-dismiss="modal" type="button">
                                        <i class="fas fa-xmark me-1"></i>
                                        Close Project
                                    </button></div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
